<div class="hamburger">☰</div>

<nav class="sidebar">
  <div class="sidebar-menu">
    <ul>
      <!-- 心理日記 -->
      <li>
        <div class="menu-item" onclick="toggleSubMenu(this)">
          <a href="#diary" data-scroll="#diary">心理日記</a>
          <span class="arrow">▶</span>
        </div>
        <ul class="sub-menu">
          <li><a href="/diary/form" class="auth-required">新增日記</a></li>
          <li><a href="/diary/list" class="auth-required">日記列表</a></li>
          <li><a href="#" class="auth-required">情緒分析</a></li>
        </ul>
      </li>

      <!-- AI 助手 -->
      <li>
        <div class="menu-item" onclick="toggleSubMenu(this)">
          <a href="#ai" data-scroll="#ai">AI 助手</a>
          <span class="arrow">▶</span>
        </div>
        <ul class="sub-menu">
          <li><a href="/ai/chat" class="auth-required">AI助手</a></li>
          <li><a href="#" class="auth-required">情緒AI</a></li>
          <li><a href="#" class="auth-required">心理測驗</a></li>
        </ul>
      </li>

      <!-- 社群互動 -->
      <li>
        <div class="menu-item" onclick="toggleSubMenu(this)">
          <a href="#community" data-scroll="#community">社群互動</a>
          <span class="arrow">▶</span>
        </div>
        <ul class="sub-menu">
          <li><a href="/social/main" class="auth-required">心情討論區</a></li>
          <li><a href="#" class="auth-required">好友聊天</a></li>
          <li><a href="#" class="auth-required">線上活動</a></li>
        </ul>
      </li>

      <!-- 問題反饋 -->
      <li>
        <div class="menu-item" onclick="toggleSubMenu(this)">
          <a href="#feedback" data-scroll="#feedback">問題反饋</a>
          <span class="arrow">▶</span>
        </div>
        <ul class="sub-menu">
          <li><a href="/support/usage" class="auth-required">使用說明</a></li>
          <li><a href="/support/faq" class="auth-required">常見問題</a></li>
          <li><a href="#" class="auth-required">聯絡我們</a></li>
        </ul>
      </li>

      <!-- 用戶登入 -->
      <li>
        {% if current_user.is_authenticated %}
          <div class="menu-item" onclick="toggleSubMenu(this)">
            <a href="#login">{{ current_user.username }}</a>
            <span class="arrow">▶</span>
          </div>
          <ul class="sub-menu">
            <li><a href="/settings/profile">個人資料</a></li>
            <li><a href="/settings/acc_settings">設定</a></li>
            <li><a href="/user/logout">登出</a></li>
          </ul>
        {% else %}
          <div class="menu-item" onclick="toggleSubMenu(this)">
            <a href="#login" data-scroll="#login">用戶功能</a>
            <span class="arrow">▶</span>
          </div>
          <ul class="sub-menu">
            <li><a href="/user/login/form">登入</a></li>
            <li><a href="/user/signup/form">註冊</a></li>
            <li><a href="#" class="auth-required">個人資料</a></li>
          </ul>
        {% endif %}
      </li>
  </div>

  <div class="sidebar-icons">
    <div class="home-button" data-scroll="#home">🏠</div>
    <div class="dark-mode-toggle" onclick="toggleDarkMode()">🌙</div>
    <div class="help-button" data-scroll="#footer">?</div>
  </div>
</nav>

