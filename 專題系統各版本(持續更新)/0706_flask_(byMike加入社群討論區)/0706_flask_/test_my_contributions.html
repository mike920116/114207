<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„è²¢ç»åŠŸèƒ½æ¸¬è©¦</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .tag-panel { width: 200px; background: white; border-radius: 8px; padding: 15px; margin-bottom: 20px; }
        .tag { 
            display: block; 
            padding: 8px 12px; 
            margin: 5px 0; 
            cursor: pointer; 
            border-radius: 6px; 
            transition: all 0.2s ease;
        }
        .tag.active { background: #5B7F47; color: white; }
        .tag:hover { background: #e9ecef; }
        .tag.active:hover { background: #4A6B38; }
        
        .post-card { 
            background: white; 
            padding: 15px; 
            margin: 10px 0; 
            border-radius: 8px; 
            border: 1px solid #ddd;
        }
        .author-actions { margin-top: 10px; color: #28a745; font-weight: bold; }
        
        .no-filtered-posts {
            text-align: center;
            padding: 40px 20px;
            background: white;
            border-radius: 8px;
            margin: 20px 0;
        }
        .no-filtered-posts .no-posts-icon { font-size: 48px; margin-bottom: 16px; }
        .no-filtered-posts .btn { 
            padding: 8px 16px; 
            border: none; 
            border-radius: 6px; 
            cursor: pointer; 
            color: white;
        }
        .no-filtered-posts .btn-primary { background: #5B7F47; }
        .no-filtered-posts .btn-secondary { background: #6c757d; }
        
        #debug { margin-top: 20px; padding: 15px; background: white; border-radius: 8px; }
        .log-entry { margin: 5px 0; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <h1>æˆ‘çš„è²¢ç»åŠŸèƒ½æ¸¬è©¦</h1>
    
    <div class="tag-panel">
        <div class="tag active" data-filter="all">ğŸ“‹ å…¨éƒ¨</div>
        <div class="tag" data-filter="my-posts">ğŸ‘¤ æˆ‘çš„è²¢ç»</div>
        <div class="tag" data-filter="happy">ğŸ˜„ é–‹å¿ƒ</div>
        <div class="tag" data-filter="sad">ğŸ˜¢ é›£é</div>
    </div>
    
    <div class="post-list">
        <!-- æ¨¡æ“¬å…¶ä»–ç”¨æˆ¶çš„è²¼æ–‡ -->
        <div class="post-card" data-mood="happy">
            <h3>å…¶ä»–ç”¨æˆ¶çš„é–‹å¿ƒè²¼æ–‡</h3>
            <p>é€™æ˜¯å…¶ä»–ç”¨æˆ¶ç™¼å¸ƒçš„é–‹å¿ƒè²¼æ–‡å…§å®¹...</p>
        </div>
        
        <!-- æ¨¡æ“¬ç•¶å‰ç”¨æˆ¶çš„è²¼æ–‡ -->
        <div class="post-card" data-mood="sad">
            <h3>æˆ‘çš„é›£éè²¼æ–‡</h3>
            <p>é€™æ˜¯ç•¶å‰ç”¨æˆ¶ç™¼å¸ƒçš„é›£éè²¼æ–‡å…§å®¹...</p>
            <div class="author-actions">âœ… é€™æ˜¯æ‚¨çš„è²¼æ–‡</div>
        </div>
        
        <div class="post-card" data-mood="happy">
            <h3>æˆ‘çš„é–‹å¿ƒè²¼æ–‡</h3>
            <p>é€™æ˜¯ç•¶å‰ç”¨æˆ¶ç™¼å¸ƒçš„é–‹å¿ƒè²¼æ–‡å…§å®¹...</p>
            <div class="author-actions">âœ… é€™æ˜¯æ‚¨çš„è²¼æ–‡</div>
        </div>
    </div>

    <div id="debug">
        <h3>èª¿è©¦ä¿¡æ¯ï¼š</h3>
        <div id="log"></div>
    </div>

    <script>
        function addLog(message) {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.textContent = `[${time}] ${message}`;
            logDiv.appendChild(entry);
        }

        function getNoPostsMessage(filterType) {
            switch (filterType) {
                case 'my-posts':
                    return 'æ‚¨é‚„æ²’æœ‰ç™¼å¸ƒä»»ä½•è²¼æ–‡ï¼Œç¾åœ¨å°±ä¾†åˆ†äº«æ‚¨çš„æƒ³æ³•å§ï¼';
                case 'happy':
                    return 'ç›®å‰æ²’æœ‰é–‹å¿ƒçš„è²¼æ–‡ï¼Œè¦ä¸è¦åˆ†äº«ä¸€äº›é–‹å¿ƒçš„äº‹æƒ…ï¼Ÿ';
                case 'sad':
                    return 'ç›®å‰æ²’æœ‰é›£éçš„è²¼æ–‡ã€‚';
                default:
                    return 'æ²’æœ‰æ‰¾åˆ°ç¬¦åˆæ¢ä»¶çš„è²¼æ–‡ã€‚';
            }
        }

        function getNoPostsAction(filterType) {
            if (filterType === 'my-posts') {
                return {
                    text: 'ç«‹å³ç™¼æ–‡',
                    emoji: 'âœï¸',
                    action: () => alert('è·³è½‰åˆ°ç™¼æ–‡é é¢')
                };
            } else {
                return {
                    text: 'æŸ¥çœ‹å…¨éƒ¨è²¼æ–‡',
                    emoji: 'ğŸ“‹',
                    action: () => document.querySelector('[data-filter="all"]').click()
                };
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            addLog('é é¢è¼‰å…¥å®Œæˆï¼Œé–‹å§‹åˆå§‹åŒ–æˆ‘çš„è²¢ç»åŠŸèƒ½');
            
            const filterTags = document.querySelectorAll('.tag');
            const postCards = document.querySelectorAll('.post-card');
            const postList = document.querySelector('.post-list');
            
            filterTags.forEach(tag => {
                tag.addEventListener('click', () => {
                    addLog(`é»æ“Šç¯©é¸å™¨: ${tag.dataset.filter}`);
                    
                    // ç§»é™¤æ‰€æœ‰ active é¡åˆ¥
                    filterTags.forEach(otherTag => otherTag.classList.remove('active'));
                    tag.classList.add('active');
                    
                    const filterType = tag.dataset.filter;
                    
                    // ç§»é™¤ä¹‹å‰çš„ç©ºç‹€æ…‹è¨Šæ¯
                    const existingNoFilteredPosts = postList.querySelector('.no-filtered-posts');
                    if (existingNoFilteredPosts) {
                        existingNoFilteredPosts.remove();
                    }
                    
                    let visibleCount = 0;
                    
                    if (filterType === 'all') {
                        postCards.forEach(card => {
                            card.style.display = 'block';
                            visibleCount++;
                        });
                    } else if (filterType === 'my-posts') {
                        postCards.forEach(card => {
                            const hasAuthorActions = card.querySelector('.author-actions');
                            card.style.display = hasAuthorActions ? 'block' : 'none';
                            if (hasAuthorActions) visibleCount++;
                        });
                    } else {
                        postCards.forEach(card => {
                            const isMatch = filterType === card.dataset.mood;
                            card.style.display = isMatch ? 'block' : 'none';
                            if (isMatch) visibleCount++;
                        });
                    }
                    
                    addLog(`ç¯©é¸çµæœ: é¡¯ç¤º ${visibleCount} ç¯‡è²¼æ–‡`);
                    
                    // å¦‚æœæ²’æœ‰ç¬¦åˆçš„è²¼æ–‡ï¼Œé¡¯ç¤ºç©ºç‹€æ…‹
                    if (visibleCount === 0 && postCards.length > 0) {
                        const action = getNoPostsAction(filterType);
                        const noFilteredPosts = document.createElement('div');
                        noFilteredPosts.className = 'no-filtered-posts';
                        noFilteredPosts.innerHTML = `
                            <div class="no-posts-icon">${filterType === 'my-posts' ? 'ğŸ“' : 'ğŸ”'}</div>
                            <p>${getNoPostsMessage(filterType)}</p>
                            <button class="btn ${filterType === 'my-posts' ? 'btn-primary' : 'btn-secondary'}" onclick="(${action.action.toString()})()">
                                <span class="btn-emoji">${action.emoji}</span> ${action.text}
                            </button>
                        `;
                        postList.appendChild(noFilteredPosts);
                        addLog('é¡¯ç¤ºç©ºç‹€æ…‹è¨Šæ¯');
                    }
                });
            });
            
            addLog('æˆ‘çš„è²¢ç»åŠŸèƒ½åˆå§‹åŒ–å®Œæˆ');
        });
    </script>
</body>
</html>
