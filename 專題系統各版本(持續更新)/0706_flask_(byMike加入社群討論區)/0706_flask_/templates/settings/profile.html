{% extends 'base.html' %}

{% block title %}個人資料{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modules/user/settings.css') }}">
<script src="{{ url_for('static', filename='js/modules/user/settings.js') }}"></script>
{% endblock %}

{% block content %}
<div class="settings-page-wrapper">
  <div class="settings-box">
    <h2>編輯個人資料</h2>
    <form method="POST" enctype="multipart/form-data">
      <label for="username">暱稱</label>
      <input type="text" id="username" name="username" class="form-control" value="{{ username }}" required>

      <label for="bio">自我介紹（最多 200 字）</label>
      <textarea id="bio" name="bio" class="form-control" maxlength="200">{{ bio or '' }}</textarea>
      <p id="bio-counter">剩餘 200 字</p>

      <div class="avatar-wrapper">
        <label for="avatar">頭像預覽</label>
        <input type="file" id="avatar" name="avatar" accept="image/*" onchange="previewAvatar(event)">
        <img id="avatar-preview" src="{{ avatar_url or url_for('static', filename='images/default-avatar.png') }}" alt="頭像預覽">
      </div>      

      <button type="submit" class="btn btn-success" style="margin-top: 20px;">💾 儲存變更</button>
    </form>
  </div>
</div>
{% endblock %}

