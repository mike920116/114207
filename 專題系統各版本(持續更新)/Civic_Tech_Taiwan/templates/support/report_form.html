{% extends 'base.html' %}

{% block title %}問題舉報 - 支援中心{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/modules/support/report.css') }}">
{% endblock %}

{% block content %}
<div class="support-wrapper">
  <div class="support-container">
    <!-- 頁面標題 -->
    <div class="page-header">
      <h1 class="page-title">問題回饋</h1>
      <p class="page-subtitle">遇到問題或有建議？請填寫以下表單，我們會儘快回覆您</p>
    </div>

    <!-- 舉報表單 -->
    <div class="report-form-container">
      <form method="POST" action="{{ url_for('support.submit_report') }}" class="report-form">
        
        <!-- 舉報主題 -->
        <div class="form-group">
          <label for="theme" class="form-label required">回饋主題</label>
          <input type="text" 
                 id="theme" 
                 name="theme" 
                 class="form-control" 
                 placeholder="簡述您要舉報的問題（例：搜尋功能異常）"
                 required 
                 maxlength="100">
          <small class="form-text">請簡要描述問題的核心（最多 100 字）</small>
        </div>

        <!-- 問題類型 -->
        <div class="form-group">
          <label class="form-label required">問題類型（可多選）</label>
          <div class="checkbox-group">
            <div class="checkbox-item">
              <input type="checkbox" id="bug" name="options" value="功能異常">
              <label for="bug">功能異常</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="ui" name="options" value="介面問題">
              <label for="ui">介面問題</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="performance" name="options" value="效能問題">
              <label for="performance">效能問題</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="security" name="options" value="安全問題">
              <label for="security">安全問題</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="content" name="options" value="內容問題">
              <label for="content">內容問題</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="suggestion" name="options" value="功能建議">
              <label for="suggestion">功能建議</label>
            </div>
            <div class="checkbox-item">
              <input type="checkbox" id="other" name="options" value="其他問題">
              <label for="other">其他問題</label>
            </div>
          </div>
        </div>

        <!-- 相關貼文 ID（可選） -->
        <div class="form-group">
          <label for="post_id" class="form-label">相關貼文 ID（可選）</label>
          <input type="number" 
                 id="post_id" 
                 name="post_id" 
                 class="form-control" 
                 placeholder="如果與特定貼文相關，請填入貼文 ID">
          <small class="form-text">如果您的回饋與特定貼文相關，請提供貼文 ID</small>
        </div>

        <!-- 詳細說明 -->
        <div class="form-group">
          <label for="context" class="form-label required">詳細說明</label>
          <textarea id="context" 
                    name="context" 
                    class="form-control" 
                    rows="6" 
                    placeholder="請詳細描述遇到的問題，包括：&#10;1. 發生問題的具體步驟&#10;2. 預期的結果與實際結果&#10;3. 問題發生的頻率&#10;4. 使用的瀏覽器或設備資訊&#10;5. 其他相關資訊"
                    required 
                    minlength="10"
                    maxlength="2000"></textarea>
          <div class="character-count">
            <span id="char-count">0</span> / 2000 字
          </div>
        </div>

        <!-- 提交按鈕 -->
        <div class="form-actions">
          <button type="button" class="btn btn-secondary" onclick="history.back()">取消</button>
          <button type="submit" class="btn btn-primary">提交回饋</button>
        </div>
      </form>
    </div>

    <!-- 支援中心導航 -->
    <div class="support-navigation">
      <div class="nav-section">
        <h4>📋回饋相關</h4>
        <div class="nav-links">
          <a href="{{ url_for('support.report_history') }}" class="nav-link">
            <i class="icon-history"></i>
            <span>回饋歷史</span>
          </a>
        </div>
      </div>
      
      <div class="nav-section">
        <h4>❓ 幫助中心</h4>
        <div class="nav-links">
          <a href="{{ url_for('support.support_usage') }}" class="nav-link">
            <i class="icon-help"></i>
            <span>使用說明</span>
          </a>
          <a href="{{ url_for('support.support_faq') }}" class="nav-link">
            <i class="icon-question"></i>
            <span>常見問題</span>
          </a>
        </div>
      </div>
    </div>

    <!-- 注意事項 -->
    <div class="notice-section">
      <h3>📋 注意事項</h3>
      <ul>
        <li>請詳細描述問題，這有助於我們更快地找到解決方案</li>
        <li>如果是緊急問題，請透過客服信箱聯繫我們</li>
        <li>我們會在 24 小時內回覆您的舉報</li>
        <li>您可以在上方導航中的「回饋歷史」查看處理進度</li>
        <li>惡意或虛假舉報可能會影響您的帳戶使用權限</li>
      </ul>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/modules/support/report.js') }}"></script>
{% endblock %}
