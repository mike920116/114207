# 後台預約查看系統

## 功能概述

這個預約查看系統為後台管理員提供了**只讀**的預約資料檢視功能，專門用於查看和監控預約狀況，**不提供編輯功能**。

### 1. 醫院選擇頁面 (`/admin/appointment-hospitals`)
- 顯示所有合作醫院的列表
- 每個醫院卡片顯示基本資訊和統計數據
- 點擊醫院卡片進入該醫院的預約查看頁面

### 2. 預約查看頁面 (`/admin/appointment-management/<hospital_id>`)
- 顯示指定醫院的所有預約紀錄（僅供查看）
- 提供篩選和搜尋功能
- 支援查看預約詳情（無編輯功能）

## 頁面功能詳解

### 醫院選擇頁面功能
- ✅ 醫院列表展示（5家合作醫院）
- ✅ 統計資訊顯示（總預約數、待處理數）
- ✅ 響應式設計
- ✅ 點擊跳轉功能

### 預約查看頁面功能
- ✅ 預約記錄表格顯示（僅供查看）
- ✅ 狀態篩選（待處理、已確認、已完成、已取消）
- ✅ 關鍵字搜尋
- ✅ 統計卡片（總數、各狀態數量）
- ✅ 查看預約詳情（Modal）
- ✅ 返回醫院列表
- ❌ **已移除編輯功能**
- ❌ **已移除刪除功能**
- ❌ **已移除新增時段功能**

## 資料結構

### 醫院資料 (HOSPITAL_DATA)
```python
{
    'hospital1': {
        'name': '衛生福利部桃園醫院',
        'doctors': [
            {'value': 'doctor1', 'name': '王志明醫師 - 兒童發展評估中心'},
            # ...
        ]
    }
    # ...
}
```

### 預約資料 (APPOINTMENT_RECORDS)
```python
{
    'id': '#APT001',
    'hospital': '衛生福利部桃園醫院',
    'doctor': '王志明醫師',
    'datetime': '2025-07-30 09:00',
    'status': 'confirmed',
    'parent_name': '張家長',
    'child_name': '張小明',
    'child_age': '8',
    'contact_phone': '0912345678',
    'symptoms': '注意力不集中，學習困難...',
    'diary_permission': True,
    'created_at': '2025-07-25 14:30'
}
```

## 使用方式

### 訪問預約管理
1. 登入後台管理系統
2. 在側邊欄點擊「🏥 預約管理」
3. 選擇要管理的醫院
4. 進入該醫院的預約管理頁面

### 管理預約
1. **查看預約列表**：所有預約以表格形式顯示
2. **篩選預約**：使用狀態下拉選單篩選
3. **搜尋預約**：輸入關鍵字搜尋家長姓名、孩子姓名或預約編號
4. **查看詳情**：點擊👁️按鈕查看完整預約資訊

### ⚠️ 權限限制
- **僅供查看**：後台管理員只能查看預約資料，無法進行任何修改
- **醫療專業**：預約的編輯和管理應由醫療專業人員負責
- **資料安全**：避免非醫療人員誤操作重要醫療預約資料

## 權限要求

- 只有管理員可以訪問預約管理功能
- 需要通過 `is_admin()` 函數驗證
- 未授權用戶將收到 403 錯誤

## 路由結構

```
/admin/appointment-hospitals          # 醫院選擇頁面
/admin/appointment-management/<id>    # 特定醫院預約管理
```

## 技術細節

### 前端技術
- HTML5 + CSS3 + JavaScript
- 響應式設計（Grid + Flexbox）
- Modal 彈窗
- 即時篩選和搜尋

### 後端技術
- Flask Blueprint
- Jinja2 模板
- 權限驗證裝飾器

### 資料來源
- 目前使用假資料 (APPOINTMENT_RECORDS)
- 實際應用中應連接資料庫

## 注意事項

⚠️ **重要提醒**：
- 目前所有功能使用假資料進行演示
- **僅供查看預約資料，不提供編輯功能**
- 後台管理員的職責僅限於監控和查看
- 預約的編輯、刪除等操作應由醫療專業人員負責
- 在生產環境中需要實作對應的資料庫連接

## 設計理念

### 🔒 權限分離
- **後台管理員**：僅能查看預約統計和詳情
- **醫療人員**：擁有完整的預約管理權限
- **系統管理員**：負責整體系統維護

### 📊 監控導向
- 重點提供統計資訊和資料概覽
- 方便管理員了解系統使用狀況
- 支援快速查找和篩選功能

## 後續開發建議

1. **資料庫整合**：將假資料替換為真實的資料庫查詢
2. **即時更新**：使用WebSocket實現即時資料更新
3. **匯出功能**：支援預約資料的Excel匯出
4. **進階篩選**：增加日期範圍、醫師等更多篩選條件
5. **統計圖表**：增加視覺化的統計圖表
6. **通知系統**：異常狀況（如取消率過高）自動警示

### 🏥 醫療端功能建議
建議另外開發醫療人員專用的管理界面，包含：
- 預約編輯和狀態更新
- 時段管理和排程
- 病歷記錄關聯
- 治療計劃制定

## 樣式特色

- 🎨 符合系統整體設計風格
- 📱 完全響應式設計
- 🌙 支援深色模式
- 💫 流暢的動畫效果
- 🔍 直觀的搜尋和篩選
- 📊 清晰的統計資訊展示
